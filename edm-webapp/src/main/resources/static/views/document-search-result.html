<div class="k-content col-md-12">
    <form name="searchForm" class="navbar-form navbar-left" role="search">
        <div class="form-group" style="width:250px;">
            <input size="35" list="suggestions" ng-model="searchedPattern" type="text" class="form-control spec-input-search" placeholder="Que voulez-vous chercher ?" ng-required="true" ng-change="searchPatternHaveBeenUpdated()" ng-model-options="{ debounce: 500 }"
            autofocus />
            <datalist id="suggestions">
                Votre navigateur ne permet pas d'afficher les suggestions, essayez en un plus récent !
                <option ng-value="autocompleteDocument.name" label="{{autocompleteDocument.nodePath}}" ng-repeat="autocompleteDocument in autocompleteDocumentList" />
            </datalist>
        </div>
        <button style="margin-left:60px" ng-click="submitSearch()" class="btn btn-primary btn-raised spec-button-search" ng-disabled="searchForm.$invalid">Rechercher !</button>
    </form>
</div>

<br/>
<br/>
<br/>

<div class="k-content col-md-8">

    <div class="pull-right" ng-show="searchResults"><small><em class="text-muted"><span class="spec-doc-found-count">{{searchResults.totalHitsCount}}</span> documents trouvés en {{searchResults.tookTime}} ms</em></small></div>
    <br/>

    <div ng-repeat="searchResult in searchResults.searchResults">
        <a class="lead" target="_blank" ng-href="{{linkToDocument(searchResult.edmDocument)}}">
            <div ng-class="'icone-sprite ' + getDocumentNodeIcon(searchResult.edmDocument)"></div>
            <span ng-bind-html="getTrustedHtmlContent(searchResult.highlightedName || searchResult.edmDocument.name)" class="spec-search-result-doc-title"></span>
        </a>
        <br/>
        <span class="text-muted">
	        <a target="_blank" ng-href="{{linkToDocument(searchResult.edmDocument)}}" class="text-muted" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedNodePath || searchResult.edmDocument.nodePath)">
	        </a>
	        <small>
	        	&mdash; 
		        {{searchResult.edmDocument.date | date : 'dd/MM/yyyy'}}
		        &mdash;
		        <span class="label" ng-style="{
		        	'color': findCategoryById(searchResult.edmDocument.categoryId).color || '#FFF', 
		        	'background-color': findCategoryById(searchResult.edmDocument.categoryId).backgroundColor || '#009688'
		        	}">
		        	{{findCategoryById(searchResult.edmDocument.categoryId).name}}
		        </span>
        </small>
        </span>
        <br/>
        <p ng-bind-html="getTrustedHtmlContent(searchResult.highlightedDescription || searchResult.edmDocument.description)"></p>
        <pre ng-show="searchResult.highlightedFileContentMatching" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedFileContentMatching)">
	    </pre>
        <hr/>
    </div>

</div>


<div class="k-content col-md-4">
    <strong>Le top des mots clés qui vous intéressent !</strong>
    <br/>
    <ul class="nav nav-pills">
        <li ng-repeat="topTerm in topTerms">
            <a href="" ng-click="addWordAndSubmitSearch(topTerm.key)">{{topTerm.key}} <span class="badge">{{topTerm.docCount}}</span></a>
        </li>
    </ul>

    <hr/>

    <strong>Catégories</strong>
    <br/>
    <form name="input_category" class="filecategory-columns">
        <span ng-repeat="category in categories">
			<input	type="checkbox"
					ng-checked="true"
					ng-change="submitSearchWithFilters()"
					ng-model="category.isChecked"
					ng-init="category.isChecked = true"
			/>
			{{category.name}}
        <br/>
        </span>
    </form>

    <span ng-if="searchedPattern">
	
 	<hr/>

    <strong>Date</strong>
	<br/>
	<form name="input_fileDate" class="filedate-columns">
	    <span ng-repeat="aggItem in aggregations.date" ng-init="currentData = extractAggregationInfoFromDateAgg(aggItem.key)">
			<input	type="radio"
			        ng-change="submitSearchWithFilters()"
					ng-model="$parent.$parent.dateAggregationFilter"
					name="dateAggregationFilter"
					ng-value="currentData.value"
			/>
			{{currentData.label}} <span class="badge">{{aggItem.docCount}}</span>
    <br/>
    </span>
    </form>

    <hr/>

    <strong>Type</strong>
    <br/>
    <form name="input_fileExtension" class="filetype-columns">
        <span ng-repeat="aggItem in aggregations.fileExtension">
			<input	type="checkbox"
					ng-checked="true"
					ng-change="submitSearchWithFilters()"
					ng-model="aggItem.isChecked"
					ng-init="aggItem.isChecked = true"
			/>
			{{aggItem.key}} <span class="badge">{{aggItem.docCount}}</span>
        <br/>
        </span>
    </form>

    </span>
</div>