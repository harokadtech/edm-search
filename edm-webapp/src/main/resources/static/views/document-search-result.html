<div class="k-content col-md-12">
	<form name="searchForm" class="navbar-form navbar-left" role="search">
		<div class="form-group" style="width:250px;">
			<input list="suggestions" ng-model="searchedPattern" type="text" class="form-control" placeholder="Que voulez-vous chercher ?" ng-required="true" ng-change="searchPatternHaveBeenUpdated()" />
			<datalist id="suggestions">
				Votre navigateur ne permets pas d'afficher les suggestions, essayer en un plus récent !
				<option ng-value="autocompleteDocument.name" label="{{autocompleteDocument.nodePath}}" ng-repeat="autocompleteDocument in autocompleteDocumentList" />
			</datalist>
		</div>
		<button ng-click="searchSubmit()"  class="btn btn-default" ng-disabled="searchForm.$invalid">Rechercher !</button>
	</form>
</div>

<br/><br/>
<hr/>

<div class="k-content col-md-2" ng-if="searchedPattern.trim().length === 0">
	<!-- empty div for empty search pattern ! -->
</div>
<div class="k-content col-md-2" ng-if="searchedPattern.trim().length !== 0">
	<strong>Types de fichier</strong>
	<br/>
	<form name="input_fileExtension">
		<span ng-repeat="aggItem in aggregations.fileExtension">
			<input	type="checkbox" 
					name="fileExtension"
					ng-value="aggItem.key" 
					ng-checked="hiddenSearchedPattern.indexOf('fileExtension:') === -1 || hiddenSearchedPattern.indexOf('fileExtension:'+aggItem.key) > -1" 
					ng-change="searchAggregationsHaveBeenUpdated()" 
					ng-model="fileExtension.aggValues[aggItem.key]" 
					ng-init="fileExtension.aggValues[aggItem.key] = hiddenSearchedPattern.indexOf('fileExtension:') === -1 || hiddenSearchedPattern.indexOf('fileExtension:'+aggItem.key) > -1" 
			/>
			{{aggItem.key}} <span class="badge">{{aggItem.docCount}}</span>
			<br/>
		</span>
	</form>
</div>


<div class="k-content col-md-8">

	<div ng-repeat="searchResult in searchResults">
	    <a class="lead" ng-href="{{linkToDocument(searchResult.edmDocument.nodePath)}}">
	    	<div ng-class="'icone-sprite ' + getDocumentNodeIcon(searchResult.edmDocument)"></div>
	        <span ng-bind-html="getTrustedHtmlContent(searchResult.highlightedName || searchResult.edmDocument.name)"></span>
	    </a>
	    <br/>
	    <span class="text-muted">
	        <a ng-href="{{linkToDocument(searchResult.edmDocument.nodePath)}}" class="text-muted" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedNodePath || searchResult.edmDocument.nodePath)"></a>
	        <small>&mdash; {{searchResult.edmDocument.date | date : 'dd/MM/yyyy'}}</small>
	    </span>
	    <br/>
	    <p ng-bind-html="getTrustedHtmlContent(searchResult.highlightedDescription || searchResult.edmDocument.description)"></p>
	    <pre ng-show="searchResult.highlightedFileContentMatching" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedFileContentMatching)">
	    </pre>
	    <hr/>
	</div>

</div>

<div class="k-content col-md-2">
	<strong>Le top des mots clés qui vous intéressent !</strong>
	<br/>
	<span ng-repeat="keyword in topKeywordsToSee">
		<span class="label label-default" ng-click="updateSearchPattern(keyword)"><a href="#" onClick="return false;" style="color:#FFFFFF">{{keyword}}</a></span>
	</span>
</div>
