<div class="k-content col-md-12">
    <form name="searchForm" class="navbar-form navbar-left" role="search">
        <div class="form-group" style="width:250px;">
            <input size="35" list="suggestions" ng-model="searchedPattern" type="text" class="form-control spec-input-search" placeholder="Que voulez-vous chercher ?" ng-required="true" ng-change="searchPatternHaveBeenUpdated()" />
            <datalist id="suggestions">
                Votre navigateur ne permets pas d'afficher les suggestions, essayer en un plus récent !
                <option ng-value="autocompleteDocument.name" label="{{autocompleteDocument.nodePath}}" ng-repeat="autocompleteDocument in autocompleteDocumentList" />
            </datalist>
        </div>
        <button style="margin-left:60px" ng-click="searchSubmit()" class="btn btn-primary btn-raised spec-button-search" ng-disabled="searchForm.$invalid">Rechercher !</button>
    </form>
</div>

<br/>
<br/>
<br/>

<div class="k-content col-md-12" ng-if="searchedPattern.trim().length !== 0">

    <button class="btn btn-default btn-raised" type="button" data-toggle="collapse" data-target="#collapseFilter" aria-expanded="true" aria-controls="collapseFilter">
        Filtrer les résultats
    </button>

    <div class="collapse" id="collapseFilter">

        <div class="panel panel-default">
            <div class="panel-body">
                <div class="k-content col-md-4">
                    <strong>Extension des fichiers</strong>
                    <br/>
                    <form name="input_fileExtension" class="filetype-columns">
                        <span ng-repeat="aggItem in aggregations.fileExtension">
					<input	type="checkbox" 
							ng-checked="true" 
							ng-change="searchAggregationsHaveBeenUpdated()" 
							ng-model="aggItem.isChecked" 
							ng-init="aggItem.isChecked = true" 
					/>
					{{aggItem.key}} <span class="badge">{{aggItem.docCount}}</span>
                        <br/>
                        </span>
                    </form>
                </div>

                <div class="k-content col-md-8">
                    <strong>Date des fichiers</strong>
                    <br/>
                    <form name="input_fileDate" class="filedate-columns">
                        <span ng-repeat="aggItem in aggregations.date">
					<input	type="checkbox" 
							ng-checked="true" 
							ng-change="searchAggregationsHaveBeenUpdated()" 
							ng-model="aggItem.isChecked" 
							ng-init="aggItem.isChecked = true" 
					/>
					{{aggItem.key | date:'MM/yyyy'}} <span class="badge">{{aggItem.docCount}}</span>
                        <br/>
                        </span>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>


<div class="k-content col-md-8">

    <div class="pull-right" ng-show="searchResults"><small><em class="text-muted"><span class="spec-doc-found-count">{{searchResults.totalHitsCount}}</span> documents trouvés en {{searchResults.tookTime}} ms</em></small></div>
    <br/>

    <div ng-repeat="searchResult in searchResults.searchResults">
        <a class="lead" ng-href="{{linkToDocument(searchResult.edmDocument.nodePath)}}">
            <div ng-class="'icone-sprite ' + getDocumentNodeIcon(searchResult.edmDocument)"></div>
            <span ng-bind-html="getTrustedHtmlContent(searchResult.highlightedName || searchResult.edmDocument.name)" class="spec-search-result-doc-title"></span>
        </a>
        <br/>
        <span class="text-muted">
	        <a ng-href="{{linkToDocument(searchResult.edmDocument.nodePath)}}" class="text-muted" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedNodePath || searchResult.edmDocument.nodePath)"></a>
	        <small>&mdash; {{searchResult.edmDocument.date | date : 'dd/MM/yyyy'}}</small>
	    </span>
        <br/>
        <p ng-bind-html="getTrustedHtmlContent(searchResult.highlightedDescription || searchResult.edmDocument.description)"></p>
        <pre ng-show="searchResult.highlightedFileContentMatching" ng-bind-html="getTrustedHtmlContent(searchResult.highlightedFileContentMatching)">
	    </pre>
        <hr/>
    </div>

</div>


<div class="k-content col-md-4">
    <strong>Le top des mots clés qui vous intéressent !</strong>
    <br/>
    <ul class="nav nav-pills">
        <li ng-repeat="topTerm in topTerms">
            <a href="" ng-click="updateSearchPatternFromTopTerms(topTerm.key)">{{topTerm.key}} <span class="badge">{{topTerm.docCount}}</span></a>
        </li>
    </ul>
</div>
